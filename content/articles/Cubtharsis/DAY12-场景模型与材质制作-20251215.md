# DAY12 - 2025.12.15 (周一)

## 今日任务

### 场景模型制作与材质处理

今天的核心目标是完成场景中大部分装饰模型的制作与材质应用，为场景增添细节和氛围。

---

## 待完成清单

### 建筑装饰
- [ ] **拱门模型与材质** - 场景入口/通道装饰

### 植物系统
- [ ] **花盆 × 3** - 不同尺寸/样式的花盆
- [ ] **花朵 × 6** - 多种花卉变体
- [ ] **树木 × 3** - 场景树木模型
- [ ] **程序化藤蔓** - 可复用的藤蔓系统
- [ ] **水生植物** - 池塘配套植物

### 场景道具
- [ ] **提灯** - 照明装饰物
- [ ] **座椅** - 休息区域道具

### 水景系统
- [ ] **池塘** - 水面与池塘边缘

### 氛围元素
- [ ] **鸟** - 飞鸟/栖息鸟模型
- [ ] **大气效果** - 配合鸟群的环境氛围

---

## 完成内容

### 油画笔触 Shader 开发

创建 `Assets/Shader/GaussianBlur.hlsl` 自定义函数，用于 Shader Graph：

**OilPaint 函数功能**：
- 笔触扰动：用噪波扰动 UV 产生手绘笔触感
- 高斯模糊：9 次采样柔化画面
- 颜色量化：减少色阶产生油画色块效果

**参数**：
- BlurSize：模糊程度（0.002 ~ 0.01）
- BrushSize：笔触大小（0.005 ~ 0.02）
- ColorLevels：颜色层次（8 ~ 32，越小越有油画感）

**Shader Graph 使用**：
1. 添加 Custom Function 节点
2. Type: File，Source: GaussianBlur.hlsl，Name: OilPaint
3. 输入：Texture(T2), Sampler(SS), UV(V2), BlurSize(F), BrushSize(F), ColorLevels(F)
4. 输出：Color(V4)

---

### Hierarchy 颜色标记

启用 Colourful Hierarchy 插件：
- 物体名称加前缀 `#`、`@`、`$` 等自动上色
- 修改 StyleHierarchy.cs 触发重新编译后生效

---

### 代码修复

- 修复 CubeDragRotator.cs 第 286 行重复 return 语句（不可达代码警告）

---

## 制作笔记

**贴图模糊方案对比**：
- Mipmap LOD：简单但模糊级别固定，有块状感
- 多次采样高斯模糊：效果好，可控性强
- PS 预处理：零性能消耗，适合静态背景

**胶片颗粒问题**：
- 远处会产生摩尔纹（噪点频率与屏幕像素干涉）
- 建议用后处理实现，或用屏幕空间 UV
- 暂时移除，后续考虑用 URP Volume 实现

---

## Memory

- [x] Colourful Hierarchy 不生效 → 修改脚本触发重新编译
- [x] Custom Function 报错 → 检查 Input/Output 名称和类型要与 hlsl 函数签名一致
- [x] 多个函数在同一 hlsl 文件会被 Shader Graph 全部编译 → 注释掉不用的函数或分文件
- [x] 胶片颗粒摩尔纹 → 降低 GrainSize 或改用屏幕空间 UV

---

## 下一步

- [ ] 模型导入 Unity 测试
- [ ] 材质参数调优
- [ ] 场景整体布局调整
